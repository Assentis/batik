<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN"
"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">

<!-- ========================================================================= -->
<!-- Copyright (C) The Apache Software Foundation. All rights reserved.        -->
<!--                                                                           -->
<!-- This software is published under the terms of the Apache Software License -->
<!-- version 1.1, a copy of which has been included with this distribution in  -->
<!-- the LICENSE file.                                                         -->
<!-- ========================================================================= -->

<!-- ========================================================================= -->
<!-- This test validates that the event target, for events triggered from the  -->
<!-- content of a 'use' element, is the 'use' element (and not the cloned      -->
<!-- elements).                                                                -->
<!--                                                                           -->
<!-- @author vincent.hardy@sun.com                                             -->
<!-- @version $Id$ -->
<!-- ========================================================================= -->

<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?>

<svg xmlns="http://www.w3.org/2000/svg" 
     xmlns:xlink="http://www.w3.org/1999/xlink"
     id="body" width="450" height="500" viewBox="0 0 450 500">

    <text class="title" x="50%" y="50">Event target on use</text>

    <script type="text/ecmascript"><![CDATA[

    function highlight(evt, onOrOff) {
        var h = document.getElementById("highlight");
        var x = 175;
        var y = 130;

        if (onOrOff) {
            var t = evt.getTarget();
            x = t.getAttributeNS(null, "x");
            y = t.getAttributeNS(null, "y");
        } 

        h.setAttributeNS(null, "x", x);
        h.setAttributeNS(null, "y", y);

    }
        
    ]]></script>

    <style type="text/css"><![CDATA[
        .label {
            text-anchor: middle;
        }
    ]]></style>

    <defs>
        <g id="useDef">
            <rect id="rectInUse" x="0" y="0" width="100" height="30" fill="gold" stroke="none" />
        </g>

        <g id="useDef2">
            <rect x="0" y="0" width="100" height="30" fill="crimson" stroke="none" />
        </g>

        <use id="useUseDef" xlink:href="#useDef2" />
    </defs>


    <text x="50%" y="210" class="label">
        <tspan x="50%" y="210">Use Target:</tspan>
        <tspan dy="1.1em" x="50%">move your mouse over the gold</tspan>
        <tspan dy="1.1em" x="50%">rectangle. This should move the </tspan>
        <tspan dy="1.1em" x="50%">black highlight over the gold rectangle</tspan>
    </text>

    <use xlink:href="#useDef" x="175" y="270" 
         onmouseover="highlight(evt, true)" 
         onmouseout="highlight(evt, false)"/>

    <g transform="translate(0,210)">
        <text x="50%" y="140" class="label">
            <tspan x="50%" y="140">Use Target: &lt;use&gt; referencing a &lt;use&gt;</tspan>
            <tspan dy="1.1em" x="50%">move your mouse over the crimson</tspan>
            <tspan dy="1.1em" x="50%">rectangle. This should move the </tspan>
            <tspan dy="1.1em" x="50%">black highlight over the crimson rectangle</tspan>
        </text>
    </g>

    <use xlink:href="#useUseDef" x="175" y="410" 
         onmouseover="highlight(evt, true)" 
         onmouseout="highlight(evt, false)"/>

    <text x="50%" y="120" class="label">Black highlight</text>
    <rect id="highlight" x="175" y="130" width="100" height="30" fill="none" 
          stroke="black" shape-rendering="crispEdges"/>


    
</svg>